(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){},119:function(e,t,a){e.exports=a(255)},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},154:function(e,t){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},173:function(e,t){},175:function(e,t){},209:function(e,t){},210:function(e,t){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(117),i=a.n(r),c=(a(124),a(6)),s=a(7),o=a(9),u=a(8),m=a(10),d=a(261),h=a(260),p=(a(125),a(259)),g=a(257),f=(a(126),a(18)),v=a.n(f),y=a(19),E=a.n(y),b=v()("https://pixelsagainstpeople.herokuapp.com/"),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={decks:[],lobbyName:"",lobbyId:null,user:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;b.on("Joined Lobby",function(t,a){e.setState({lobbyId:t,user:a})}),b.on("Lobby Not Found",function(){console.log("lobby not found")})}},{key:"findLobby",value:function(e,t){e.preventDefault(),localStorage.getItem("cahToken")&&b.emit("Join Lobby",E()(localStorage.getItem("cahToken")).id,t)}},{key:"componentDidMount",value:function(){var e=this;fetch("https://cards-against-humanity-api.herokuapp.com/sets").then(function(e){return e.json()}).then(function(t){e.setState({decks:t})}).catch(function(e){return console.log(e.message)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"homeContainer"},this.state.lobbyId&&l.a.createElement(p.a,{to:{pathname:"/play-game/"+this.state.lobbyId,user:this.state.user}}),l.a.createElement("h1",null,"Pixels Against People"),l.a.createElement("h2",null,"A Cards Against Humanity clone"),l.a.createElement("div",{className:"buttonContainer"},l.a.createElement(g.a,{className:"Link",to:"/game"},"Create Game"),l.a.createElement("form",null,l.a.createElement("input",{placeholder:"Lobby Name",type:"text",value:this.state.lobbyName,onChange:function(t){return e.setState({lobbyName:t.target.value})}}),l.a.createElement("button",{className:"Link",onClick:function(t){return e.findLobby(t,e.state.lobbyName)}},"Join Game"))))}}]),t}(n.Component),S=(a(162),a(79),function(e){var t=e.players,a=e.czarId,n=(e.bots,t.map(function(e){return l.a.createElement("li",{className:"player",key:e.id},l.a.createElement("h3",null,E()(localStorage.getItem("cahToken")).id===e._id&&"Me: ",e.name,a===e.id&&"(Card Czar)"),l.a.createElement("p",null,"points: ",e.points?e.points:0))}));return l.a.createElement("div",null,n)});var C=function(e){var t=e.setName,a=e.onClick,n=e.highlight;return l.a.createElement("span",{className:n,onClick:a},t)},w=v()("https://pixelsagainstpeople.herokuapp.com/"),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={selectedSets:["Base"],cardSets:[],lobbyId:"",lobbyName:"",user:"",players:[],redirect:!1,message:"",lobbyFail:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.checkToken(),this.state.cardSets.length<1&&fetch("https://cards-against-humanity-api.herokuapp.com/sets").then(function(e){return e.json()}).then(function(t){e.setState({cardSets:t})}).catch(function(e){return console.log(e.message)}),this.handleLobby()}},{key:"checkToken",value:function(){localStorage.getItem("cahToken")?this.setState({players:[E()(localStorage.getItem("cahToken"))]}):this.setState({redirect:!0})}},{key:"handleLobby",value:function(){var e=this;w.on("Lobby Created",function(t){e.setState({lobbyId:t})}),w.on("Lobby Creation Fail",function(t){e.setState({lobbyFail:!0,message:t})})}},{key:"highlightSet",value:function(e){var t=this.state.selectedSets;if("Base"===e)return null;t.includes(e)?(t.splice(t.indexOf(e),1),this.setState({selectedSets:t})):(t.push(e),this.setState({selectedSets:t}))}},{key:"createLobby",value:function(e,t){e.preventDefault(),fetch("https://cards-against-humanity-api.herokuapp.com/sets/multi?sets=".concat(this.state.selectedSets)).then(function(e){return e.json()}).then(function(e){var a=[],n=[];e.forEach(function(e){a=a.concat(e.blackCards),n=n.concat(e.whiteCards)}),w.emit("New Game",E()(localStorage.getItem("cahToken")).id,t,n,a)})}},{key:"renderSets",value:function(e){var t=this;return e.map(function(e){return t.state.selectedSets.includes(e.setName)?l.a.createElement(C,{onClick:function(){return t.highlightSet(e.setName)},key:e.setName,setName:e.setName,highlight:"highlighted"}):l.a.createElement(C,{onClick:function(){return t.highlightSet(e.setName)},key:e.setName,setName:e.setName,highlight:"unhighlighted"})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lobbyId,n=t.players,r=t.cardSets,i=t.lobbyName,c=t.redirect,s=t.lobbyFail,o=t.message;return l.a.createElement("div",{className:"newGameContainer"},c&&l.a.createElement(p.a,{to:"/login"}),a&&l.a.createElement(p.a,{to:{pathname:"/play-game/"+a,user:E()(localStorage.getItem("cahToken"))}}),l.a.createElement("div",{className:"players"},l.a.createElement("h1",null,"Players"),l.a.createElement("ul",null,l.a.createElement(S,{players:n,czarId:null}))),l.a.createElement("div",{className:"setContainer"},l.a.createElement("h1",null,"Select The Decks You'd Like to Use"),this.renderSets(r)),l.a.createElement("div",{className:"startButton"},l.a.createElement("form",{className:"startForm"},l.a.createElement("input",{type:"text",placeholder:"Lobby Name",value:i,onChange:function(t){return e.setState({lobbyName:t.target.value})}}),s?l.a.createElement("div",{className:"lobbyFail"},l.a.createElement("span",null,o)):null,l.a.createElement("button",{type:"submit",onClick:function(t){return e.createLobby(t,i)}},"Start"))))}}]),t}(n.Component),j=(a(163),a(164),function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.selected,n=e.onclick,r=e.submit;return l.a.createElement("div",{onClick:n,className:"white-card ".concat(a?"selected":"")},l.a.createElement("p",null,t),a&&l.a.createElement("div",{className:"overlay",onClick:r},l.a.createElement("p",null,"Confirm?")))}}]),t}(n.Component)),O=(a(165),function(e){var t=e.card,a=e.winner,n=e.gameState,r="";return a&&t.user.id===a.user.id&&(r="winning-card"),l.a.createElement("div",{className:"lwc "+r},"Selecting"===n?l.a.createElement("div",null,l.a.createElement("p",null,t.card),l.a.createElement("p",null,a&&t.name)):l.a.createElement("p",{className:"hidden"},"Pixels Aginst People"))});a(166);var I=function(e){var t=e.card,a=t.text,n=t.pick;return l.a.createElement("div",{className:"black-card"},l.a.createElement("p",null,a),l.a.createElement("div",null,l.a.createElement("p",null,"Pick: "),l.a.createElement("div",null,n)))},P=a(118),A=a.n(P),x=(a(253),function(e){return l.a.createElement("ul",null,e.messages.map(function(e){return l.a.createElement("li",{key:A.a.generate()},l.a.createElement("span",{className:"username"},e.username),": ",l.a.createElement("span",{className:"message"},e.text))}))}),L=v()("http://localhost:4000"),F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={blackCard:{},hand:[],players:[],selectedWhite:null,playedCards:[],user:null,messages:[],messageInput:"",gameState:"Idle",clientActive:!0,owner:!1,lobby:a.props.match.params.lobbyId,czar:!1,czarId:"",winningCard:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.handleCard(),this.handleGameStart(),this.handleWinCard(),this.handleDisconnect()}},{key:"componentDidMount",value:function(){this.getPlayers(),localStorage.getItem("cahToken")&&this.setState({user:E()(localStorage.getItem("cahToken"))})}},{key:"handleDisconnect",value:function(){L.on("disconnect",function(){})}},{key:"nextHand",value:function(){L.emit("Start Hand",this.state.lobby,!1)}},{key:"addbot",value:function(e){var t=this;L.emit("Add Bot",this.state.lobbyId),L.on("Bot Added",function(e){t.setState({players:e})})}},{key:"handleCard",value:function(){var e=this;L.on("Selection",function(t){var a=e.state,n=a.hand,l=a.czar,r=a.clientActive;l&&(r=!0,n=t.currPlayed.map(function(e){return e.card})),e.setState({playedCards:t.currPlayed,gameState:"Selecting",hand:n,clientActive:r})}),L.on("Update Cards",function(t){console.log(e.state.players),e.setState({playedCards:t.currPlayed})})}},{key:"getPlayers",value:function(){var e=this;L.emit("Update Players",this.state.lobby),L.on("Players Updated",function(t){var a=t.users;e.state.user.id===t.owner&&e.setState({owner:!0}),e.setState({players:a})})}},{key:"handleGameStart",value:function(){var e=this;L.on("Hand Started",function(t){var a=null,n=!1,l=!0;t.users.forEach(function(t){t._id===e.state.user.id&&(a=t.hand)}),e.state.user.id===t.czar&&(n=!0,l=!1),e.setState({players:t.users,blackCard:t.currBlack,gameState:"Playing",czar:n,clientActive:l,hand:a,playedCards:t.currPlayed,winningCard:null})})}},{key:"handleWinCard",value:function(){var e=this;L.on("Winning Card",function(t){e.setState({winningCard:t})})}},{key:"selectCard",value:function(e){this.setState({selectedWhite:e})}},{key:"submit",value:function(e){var t=this.state,a=t.hand,n=t.playedCards,l=t.clientActive,r=t.user,i=t.lobby,c=t.czar,s=t.gameState;l&&(c||"Playing"!==s?c&&"Selecting"===s&&(L.emit("Pick Card",i,e),this.setState({czar:!1,clientActive:!1})):(a.splice(a.indexOf(e),1),L.emit("Play Card",i,r,e),this.setState({hand:a,playedCards:n,clientActive:!1})))}},{key:"submitMessage",value:function(e,t){e.preventDefault(),this.setState({messageInput:""}),L.emit("Chat Message",t,this.state.user.name,this.state.lobby)}},{key:"startGame",value:function(){L.emit("Start Hand",this.state.lobby,!0)}},{key:"render",value:function(){var e=this,t=!0;localStorage.getItem("cahToken")&&(t=!1);var a=this.state,n=a.players,r=a.playedCards,i=a.blackCard,c=a.hand,s=a.selectedWhite,o=a.messageInput,u=a.messages,m=a.gameState,d=a.clientActive,h=a.owner,g=a.czar,f=a.czarId,v=a.winningCard,y=a.bots;return l.a.createElement("div",{className:"game-screen"},t&&l.a.createElement(p.a,{to:"/login"}),l.a.createElement("div",{className:"players"},l.a.createElement("h1",null,"Players"),l.a.createElement("ul",null,l.a.createElement(S,{players:n,bots:y,czarId:f}))),function(){switch(m){case"Idle":return l.a.createElement("div",{className:"play-area"},l.a.createElement("div",{className:"start-area"},l.a.createElement("h1",null,"Waiting For ",3-n.length>0?3-n.length:null," Players"),n.length>=3&&h&&l.a.createElement("button",{onClick:function(){return e.startGame()}},"Start Game")));case"Playing":return l.a.createElement("div",{className:"play-area"},l.a.createElement(I,{card:i}),r.map(function(e){return l.a.createElement(O,{key:e.card+e.user,card:e,gameState:m})}));case"Selecting":return l.a.createElement("div",{className:"play-area"},l.a.createElement(I,{card:i}),!g&&r.map(function(e){return l.a.createElement(O,{key:e.card+e.userId,card:e,gameState:m,winner:v})}));default:return l.a.createElement("p",null,"it broke dude")}}(),l.a.createElement("div",{className:"chat-area"},l.a.createElement("h1",null,"Chat"),l.a.createElement(x,{messages:u}),l.a.createElement("form",null,l.a.createElement("input",{type:"text",placeholder:"Say Something",value:o,onChange:function(t){return e.setState({messageInput:t.target.value})}}),l.a.createElement("button",{type:"submit",onClick:function(t){return e.submitMessage(t,o)}},"Say Something"))),l.a.createElement("div",{className:"white-cards"},d?l.a.createElement("ul",null,c.map(function(t){return l.a.createElement("li",{key:t},l.a.createElement(j,{text:t,selected:t===s,onclick:function(){return e.selectCard(t)},submit:function(){return e.submit(t)}}))})):l.a.createElement("div",{className:"inactive"},"Playing"===m?g?l.a.createElement("h1",null,"You are the Card Czar"):l.a.createElement("h1",null,"You already played a card"):"Idle"===m?l.a.createElement("h1",null,"Waiting for the game to start"):v?l.a.createElement("div",null,l.a.createElement("h1",null,v.user.name," Won the Round")," ",l.a.createElement("button",{onClick:function(){return e.nextHand()}},"next hand")):l.a.createElement("h1",null,"Card czar is picking a winner"))))}}]),t}(n.Component),M=(a(254),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={isAuthed:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("cahToken")&&this.setState({isAuthed:!0})}},{key:"logout",value:function(){localStorage.removeItem("cahToken"),this.setState({isAuthed:!1})}},{key:"componentDidUpdate",value:function(){localStorage.getItem("cahToken")&&(this.state.isAuthed||this.setState({isAuthed:!0}))}},{key:"render",value:function(){var e=this;return l.a.createElement("nav",{className:"navbar"},l.a.createElement("h2",null,"Pixels Against People"),this.state.isAuthed?l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(g.a,{to:"/"},"Home",l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement(g.a,{to:"/game"},"New Game",l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement(g.a,{to:"/user/:id"},"Profile",l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement("a",{href:"#",onClick:function(){return e.logout()}},"Logout",l.a.createElement("div",null)))):l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(g.a,{to:"/"},"Home",l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement(g.a,{to:"/game"},"New Game",l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement(g.a,{to:"/register"},"Sign Up",l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement(g.a,{to:"/login"},"Log in",l.a.createElement("div",null)))))}}]),t}(n.Component)),T=(a(116),v()("https://pixelsagainstpeople.herokuapp.com/")),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",redirect:!1,loginFail:!1,userId:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;T.on("authRes",function(t){"Success"===t.result?(localStorage.setItem("cahToken",t.token),e.setState({redirect:!0})):e.setState({loginFail:!0})})}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.state,a={email:t.email,password:t.password};T.emit("Login",a)}},{key:"render",value:function(){var e=this,t=this.state.redirect;return l.a.createElement("div",{className:"authContainer"},l.a.createElement("h1",null,"PAP"),l.a.createElement("div",{className:"signup"},t&&l.a.createElement(p.a,{to:"/"}),l.a.createElement("h1",null,"Welcome Back"),this.state.loginFail&&l.a.createElement("div",{className:"loginFail"},l.a.createElement("span",null,"Username or Password Incorrect")),l.a.createElement("form",{onSubmit:function(t){return e.handleClick(t)}},l.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:function(t){return e.setState({email:t.target.value})},value:this.state.email}),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:function(t){return e.setState({password:t.target.value})},value:this.state.password}),l.a.createElement("button",{type:"submit",name:"register"},"Login")),l.a.createElement("span",null,"New around here?",l.a.createElement(g.a,{to:"/register"}," Create an Account"))))}}]),t}(n.Component),W=v()("https://pixelsagainstpeople.herokuapp.com/"),G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={name:"",email:"",password:"",passwordConf:"",redirect:!1,registerFail:!1,registerMsg:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;W.on("authRes",function(t){console.log("response recieved"),"Success"===t.result?(localStorage.setItem("cahToken",t.token),e.setState({redirect:!0})):e.setState({registerFail:!0,registerMsg:"This email is already in use"})})}},{key:"handleClick",value:function(e){e.preventDefault();var t=this.state,a=t.email,n=t.name,l=t.password,r=t.passwordConf,i={email:a,name:n,password:l,passwordConf:r};a.length>=1?n.length>=1?l.length>=1?r.length>=1?W.emit("Register",i):this.setState({registerFail:!0,registerMsg:"Password Confirmation is required"}):this.setState({registerFail:!0,registerMsg:"Password is required"}):this.setState({registerFail:!0,registerMsg:"Nickname is required"}):this.setState({registerFail:!0,registerMsg:"Email is required"})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"authContainer"},l.a.createElement("h1",null,"PAP"),this.state.redirect&&l.a.createElement(p.a,{to:"/"}),l.a.createElement("div",{className:"signup"},l.a.createElement("h2",null,"Join Today"),l.a.createElement("form",{onSubmit:function(t){return e.handleClick(t)}},this.state.registerFail&&l.a.createElement("div",{className:"loginFail"},l.a.createElement("span",null,this.state.registerMsg)),l.a.createElement("input",{type:"text",name:"name",placeholder:"Nickname",onChange:function(t){return e.setState({name:t.target.value})},value:this.state.name}),l.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:function(t){return e.setState({email:t.target.value})},value:this.state.email}),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:function(t){return e.setState({password:t.target.value})},value:this.state.password}),l.a.createElement("input",{type:"password",name:"passwordConf",placeholder:"Password Confirmation",onChange:function(t){return e.setState({passwordConf:t.target.value})},value:this.state.passwordConf}),l.a.createElement("button",{type:"submit",name:"register"},"Register")),l.a.createElement("span",null,"Already Have an Account?",l.a.createElement(g.a,{to:"/login"}," Login"))))}}]),t}(n.Component),D=a(65),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,auth:!0},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({loading:!1}),this.initializeReactGA()}},{key:"initializeReactGA",value:function(){D.a.initialize("UA-151565115-1"),D.a.pageview("/")}},{key:"render",value:function(){return this.state.loading?null:l.a.createElement("div",{className:"mainContainer"},l.a.createElement(M,{auth:this.state.auth}),l.a.createElement(d.a,null,l.a.createElement(h.a,{exact:!0,path:"/",component:k}),l.a.createElement(h.a,{exact:!0,path:"/game",component:N}),l.a.createElement(h.a,{path:"/play-game/:lobbyId",component:F}),l.a.createElement(h.a,{path:"/login",component:z}),l.a.createElement(h.a,{path:"/register",component:G})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=a(258);i.a.render(l.a.createElement(H.a,null,l.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,t,a){}},[[119,1,2]]]);
//# sourceMappingURL=main.21dbdd6b.chunk.js.map